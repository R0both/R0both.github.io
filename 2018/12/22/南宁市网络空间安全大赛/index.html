<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="ctf相关," />





  <link rel="alternate" href="/atom.xml" title="Robot's blog" type="application/atom+xml" />






<meta name="description" content="web1)、超简单">
<meta name="keywords" content="ctf相关">
<meta property="og:type" content="article">
<meta property="og:title" content="南宁市网络空间安全大赛">
<meta property="og:url" content="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/index.html">
<meta property="og:site_name" content="Robot&#39;s blog">
<meta property="og:description" content="web1)、超简单">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/1.png">
<meta property="og:image" content="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/4.png">
<meta property="og:image" content="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/5.png">
<meta property="og:image" content="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/2.png">
<meta property="og:image" content="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/3.png">
<meta property="og:image" content="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/6.png">
<meta property="og:updated_time" content="2018-12-21T16:27:02.612Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="南宁市网络空间安全大赛">
<meta name="twitter:description" content="web1)、超简单">
<meta name="twitter:image" content="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/"/>





  <title>南宁市网络空间安全大赛 | Robot's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/R0both" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Robot's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/22/南宁市网络空间安全大赛/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Robot">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/0.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Robot's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">南宁市网络空间安全大赛</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-22T00:26:19+08:00">
                2018-12-22
              </time>
            

            

            

  <span class="post-updated">
    &nbsp; | &nbsp; post.updated
    <time itemprop="dateUpdated" datetime="2018-12-22T00:27:02+08:00" content="2018-12-22">
      2018-12-22
    </time>
  </span>

          </span>

          

          
            
          

          
          
             <span id="/2018/12/22/南宁市网络空间安全大赛/" class="leancloud_visitors" data-flag-title="南宁市网络空间安全大赛">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
                 <span>℃</span> 
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  2,167
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  11
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="web"><a href="#web" class="headerlink" title="web"></a>web</h1><h3 id="1-、超简单"><a href="#1-、超简单" class="headerlink" title="1)、超简单"></a>1)、超简单</h3><a id="more"></a>
<p>打开题目就看到了源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">$white_list = range(0,9); </span><br><span class="line">require_once(&apos;flag.php&apos;); </span><br><span class="line">if(isset($_REQUEST[&apos;no&apos;]))&#123; </span><br><span class="line">    $a=$_REQUEST[&apos;no&apos;]; </span><br><span class="line">    if(@ereg(&quot;^[0-9]+$&quot;, $a) === FALSE)&#123; </span><br><span class="line">        echo &apos;no must be number&apos;; </span><br><span class="line">    &#125;else&#123; </span><br><span class="line">        if(in_array($a,$white_list))&#123; </span><br><span class="line">            if(strlen($a)&gt;1)&#123; </span><br><span class="line">                echo &apos;you are a great dark phper&lt;br&gt;&apos;; </span><br><span class="line">                echo &quot;&lt;img src=&apos;dark.gif&apos;&gt;&lt;br&gt;&quot;; </span><br><span class="line">                echo $flag; </span><br><span class="line">            &#125;else&#123; </span><br><span class="line">                echo &apos;you no dark&apos;; </span><br><span class="line">            &#125; </span><br><span class="line">        &#125;else&#123; </span><br><span class="line">            echo &apos;you are so dark&apos;; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125;     </span><br><span class="line">&#125;else </span><br><span class="line">    highlight_file(__FILE__);</span><br></pre></td></tr></table></figure>
<p>看到里面有个ereg()函数，因为ereg函数存在NULL截断漏洞，所以直接构造payload：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://gxnnctf.gxsosec.cn:12311/?no=1%00</span><br></pre></td></tr></table></figure>
<p><img src="/2018/12/22/南宁市网络空间安全大赛/1.png" alt="image"></p>
<p>得到flag：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">H0xIkKSSKS62UXPgLtCElE8jDCL7a2nqxDTT</span><br></pre></td></tr></table></figure>
<h3 id="2）、帽子商城"><a href="#2）、帽子商城" class="headerlink" title="2）、帽子商城"></a>2）、帽子商城</h3><p>这个题目很骚，官方放出tips:1s，所以判断应该是条件竞争。<br>跟2017年的0ctf的一题很像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://momomoxiaoxi.com/2017/03/21/0CTF/?tdsourcetag=s_pcqq_aiomsg</span><br></pre></td></tr></table></figure>
<p>但是这题的session并没有变，所以想到同一个浏览器访问的phpsession是一样的，换个浏览器就有两个cookie，先改包用0元过level 1，再用另一个浏览器登陆刚才的账号，抓包发到intruder模块，开始爆破phpsession，payload就是那两个session。<br><img src="/2018/12/22/南宁市网络空间安全大赛/4.png" alt="image"><br><img src="/2018/12/22/南宁市网络空间安全大赛/5.png" alt="image"></p>
<p><img src="/2018/12/22/南宁市网络空间安全大赛/2.png" alt="image"></p>
<h3 id="3）、sql"><a href="#3）、sql" class="headerlink" title="3）、sql???"></a>3）、sql???</h3><p>扫一下发现目录里面有./git，.git源码泄露，网上找脚本打把index.php dump下来：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$flag = &apos;gxnnctf&#123;***************************&#125;&apos;;</span><br><span class="line">require_once(&apos;config.php&apos;);</span><br><span class="line">$conn = new mysqli($db_servername,$db_username,$db_password,$db_name);</span><br><span class="line">if($conn-&gt;connect_error)&#123;</span><br><span class="line">    die(&quot;Connect failed:&quot;.$conn-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line">if(isset($_GET[&apos;id&apos;]))&#123;</span><br><span class="line">    $id = $_GET[&apos;id&apos;];</span><br><span class="line">    if(preg_match(&apos;#sleep|benchmark|floor|rand|count|select|from|\(|\)|time|date|sec|day#is&apos;,$id))</span><br><span class="line">        die(&apos;Don\&apos;t hurt me :-(&apos;);</span><br><span class="line">    $sql = &quot;select username from user where id = &quot;.$id;</span><br><span class="line">    $result = $conn-&gt;query($sql);</span><br><span class="line">    if($result)&#123;</span><br><span class="line">        $row = $result-&gt;fetch_array();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        echo mysqli_error($conn);</span><br><span class="line">        die();</span><br><span class="line">    &#125;</span><br><span class="line">    echo(&apos;hello &apos;.$row[&apos;username&apos;].&apos;&lt;br&gt;&apos;);</span><br><span class="line">    $username = $row[&apos;username&apos;];</span><br><span class="line">    if($username === &apos;guest&apos;)&#123;</span><br><span class="line">        $ip = @$_SERVER[&apos;HTTP_X_FORWARDED_FOR&apos;]!=&quot;&quot; ? $_SERVER[&apos;HTTP_X_FORWARDED_FOR&apos;]:$_SERVER[&apos;REMOTE_ADDR&apos;];</span><br><span class="line">        if(preg_match(&apos;#sleep|benchmark|floor|rand|count|select|from|\(|\)|time|date|sec|day#is&apos;,$ip))&#123;</span><br><span class="line">            die(&apos;Don\&apos; hack me&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">        if(!empty($ip))&#123;</span><br><span class="line">            echo &apos;you from &apos;.$ip.&apos; , I remembered it.&lt;br&gt;&apos;;</span><br><span class="line">            $conn-&gt;query(&quot;insert into logs(ip) values(&apos;$ip&apos;)&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        $result = $conn-&gt;query(&quot;select username from user where id =&quot;.$id);</span><br><span class="line">        $row = $result-&gt;fetch_array();</span><br><span class="line">        $username = $row[&apos;username&apos;];</span><br><span class="line">        if($username === &apos;admin&apos;)&#123;</span><br><span class="line">            var_dump($_GET[&apos;backdoor&apos;]);</span><br><span class="line">            if(isset($_GET[&apos;backdoor&apos;])&amp;&amp;$_GET[&apos;backdoor&apos;]===&apos;Melonrind&apos;)&#123;</span><br><span class="line">                echo &apos;you find the backdoor!!!&lt;br&gt;&apos;;</span><br><span class="line">                die($flag);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                echo &quot;you are so great,but you don\&apos;t have backdoor,so continue to challenge :(&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            echo &quot;but i don\&apos;t waiting for you &quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        echo &apos;emmmmm&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    echo &apos;welcome to gxnnctf2018!&lt;br&gt;&apos;;</span><br><span class="line">    echo &apos;i filtered everything,so have a good time :)&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>哇，过滤了一堆东西，居然连括号都过滤了。</p>
<p>大概意思就是要username是guest同时也要是admin才能得到flag，<br>搜了一下发现跟<a href="#">SeePwn CTF</a>的一道注入题差不多：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://heartsky.info/2017/07/16/%E4%B8%80%E4%B8%AA%E6%9C%89%E8%B6%A3%E7%9A%84-SQL-%E6%B3%A8%E5%85%A5%E5%B0%8F%E7%B3%BB%E5%88%97/?tdsourcetag=s_pcqq_aiomsg</span><br></pre></td></tr></table></figure>
<p>所以按照他的思路来就是：</p>
<p>在第一条语句中定义了一个自定义变量，根据它是否为 NULL 作为判断条件。除了 if 还可以用 case 语句，而且没有圆括号</p>
<p>构造出最终payload:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=case when @hs is null then @hs:=2 else 1 end # &amp;backdoor=Melonrind</span><br></pre></td></tr></table></figure>
<h1 id="misc"><a href="#misc" class="headerlink" title="misc"></a>misc</h1><h3 id="1-、太简单了"><a href="#1-、太简单了" class="headerlink" title="1)、太简单了"></a>1)、太简单了</h3><p>下载下来是个没有后缀的文件，binwalk看到是个zip，但是解压不了，winhex打开发现文件头不对，把头改成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">50 4b 03 04</span><br></pre></td></tr></table></figure>
<p>压缩文件的头，解压后得到flag.png:</p>
<p><img src="/2018/12/22/南宁市网络空间安全大赛/3.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Do_you_know_ziphead</span><br></pre></td></tr></table></figure>
<h3 id="2-、misc2"><a href="#2-、misc2" class="headerlink" title="2)、misc2"></a>2)、misc2</h3><p>这么多文件爆破肯定是不可能的啦，所以猜到是crc加密，网上找表哥的脚本跑：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#coding:utf-8</span><br><span class="line">import zipfile</span><br><span class="line">import string</span><br><span class="line">import binascii</span><br><span class="line">  </span><br><span class="line">def CrackCrc(crc):</span><br><span class="line">    for i in dic:</span><br><span class="line">        for j in dic:</span><br><span class="line">            for p in dic:</span><br><span class="line">                for q in dic:</span><br><span class="line">                    s = i + j + p + q</span><br><span class="line">                    if crc == (binascii.crc32(s) &amp; 0xffffffff):</span><br><span class="line">                        #print s</span><br><span class="line">                        f.write(s)</span><br><span class="line">                        return</span><br><span class="line">  </span><br><span class="line">def CrackZip():</span><br><span class="line">    for I in range(39):</span><br><span class="line">        file = &apos;chunk&apos; + str(I) + &apos;.zip&apos;</span><br><span class="line">        f = zipfile.ZipFile(file, &apos;r&apos;)</span><br><span class="line">        GetCrc = f.getinfo(&apos;data.txt&apos;)</span><br><span class="line">        crc = GetCrc.CRC</span><br><span class="line">        #以上3行为获取压缩包CRC32值的步骤</span><br><span class="line">        #print hex(crc)</span><br><span class="line">        CrackCrc(crc)</span><br><span class="line">  </span><br><span class="line">dic = string.ascii_letters + string.digits + &apos;+/=&apos;</span><br><span class="line">  </span><br><span class="line">f = open(&apos;out.txt&apos;, &apos;w&apos;)</span><br><span class="line">CrackZip()</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>得到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">090 051 104 117 098 109 078 048 090 110 115 121 097 086 066 102 081 051 074 106 088 050 112 049 078 088 082 102 083 122 070 069 090 068 070 117 079 088 048</span><br></pre></td></tr></table></figure>
<p>再十进制转ascii得到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Z3hubmN0ZnsyaVBfQ3JjX2p1NXRfSzFEZDFuOX0</span><br></pre></td></tr></table></figure>
<p>再转base64得到flag：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2iP_Crc_ju5t_K1Dd1n9</span><br></pre></td></tr></table></figure>
<h3 id="3-、txt"><a href="#3-、txt" class="headerlink" title="3)、txt"></a>3)、txt</h3><p>附件是这么一句蛇皮的话：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Welcome to Guangxi NanNing CTF,enjoy this,have a good time.(｡･∀･)ﾉﾞ</span><br></pre></td></tr></table></figure>
<p>零宽度空间隐写，直接丢网站上面解：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://offdev.net/demos/zwsp-steg-js?tdsourcetag=s_pctim_aiomsg</span><br></pre></td></tr></table></figure>
<p>最后得到flag：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T2oFG2ZoAzVsK7dXy1ZLrIxY8E5q8uHjG5Cz</span><br></pre></td></tr></table></figure>
<h3 id="3-、流量包"><a href="#3-、流量包" class="headerlink" title="3)、流量包"></a>3)、流量包</h3><p>打开流量包分析发现他执行了这些操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">查看权限</span><br><span class="line"></span><br><span class="line">dir目录</span><br><span class="line"></span><br><span class="line">查看flag.zip</span><br><span class="line"></span><br><span class="line">上传exe文件</span><br><span class="line"></span><br><span class="line">运行exe产生dmp</span><br><span class="line"></span><br><span class="line">makecab打包dmp</span><br><span class="line"></span><br><span class="line">查看dmp的zip</span><br></pre></td></tr></table></figure>
<p>用networkMiner查看，可以看到：</p>
<p><img src="/2018/12/22/南宁市网络空间安全大赛/6.png" alt="image"></p>
<p>其中14219B的就是flag.zip,把dmp还原，得到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntlm: 11da62168bb9a260cc9ba7e798e31953</span><br></pre></td></tr></table></figure>
<p>直接拿这个md5值打开flag.zip，得到一张图片，再用文本打开图片搜索关键字”flag、gxnnctf、ctf”等各种关键字，最后是用ctf搜出了flag，最终flag为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6OUpOR89CMIb95FOym41AbijPgsySBdmWdwT</span><br></pre></td></tr></table></figure>
<h1 id="Mobile"><a href="#Mobile" class="headerlink" title="Mobile"></a>Mobile</h1><h3 id="1-、Android300"><a href="#1-、Android300" class="headerlink" title="1)、Android300"></a>1)、Android300</h3><p>将APK反编译后利用JD查看java层源码，发现调用了libnative-lib.so对输入的值进行判断，对该so文件静态分析，得到伪C代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">if ( v5 )</span><br><span class="line">    &#123;</span><br><span class="line">    	v9 = Twofish_setup(&amp;v19, 0xC0u);</span><br><span class="line">    	Twofish_encryt();</span><br><span class="line">    	Twofish_decryt(v9, v26, &amp;v25);</span><br><span class="line">    	v10 = 0;</span><br><span class="line">    	v11 = &quot;fail&quot;;</span><br><span class="line">    	while ( byte_4780[v10] == v26[v10] )</span><br><span class="line">    	&#123;</span><br><span class="line">      		v12 = v10 + 1;</span><br><span class="line">     		 v13 = v10++ &gt;= 0xF;</span><br><span class="line">      		if ( v13 )</span><br><span class="line">      		&#123;</span><br><span class="line">    			if ( v12 == 16 )</span><br><span class="line">    			&#123;</span><br><span class="line">      				Twofish_decryt(v9, &amp;v15, &amp;v25);</span><br><span class="line">      				v11 = malloc(0x11u);</span><br><span class="line">      				*(v11 + 16) = 0;</span><br><span class="line">      				_aeabi_memcpy(v11, &amp;v25, 16);</span><br><span class="line">    			&#125;</span><br><span class="line">    			else</span><br><span class="line">    			&#123;</span><br><span class="line">      			v11 = &quot;fail&quot;;</span><br><span class="line">    			&#125;</span><br><span class="line">    			return (*(*v3 + 668))(v3, v11);</span><br><span class="line">      			&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">    	v11 = &quot;fail&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    return (*(*v3 + 668))(v3, v11);</span><br></pre></td></tr></table></figure>
<p>发现这里的算法是Twofish加密方式、继续分析发现返回值为v11，与java层联系分析发现正确输入后的的返回值即为flag</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">paramAnonymousView = MainActivity.this.stringFromJNI(paramAnonymousView);</span><br><span class="line"></span><br><span class="line">        paramAnonymousView = MainActivity.this.stringFromJNI(paramAnonymousView);</span><br><span class="line">        if (paramAnonymousView.equals(&quot;fail&quot;))</span><br><span class="line">        &#123;</span><br><span class="line">          MainActivity.this.tv.setText(&quot;try again&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">          TextView localTextView = MainActivity.this.tv;</span><br><span class="line">          StringBuilder localStringBuilder = new StringBuilder();</span><br><span class="line">          localStringBuilder.append(&quot;flag&#123;&quot;);</span><br><span class="line">          localStringBuilder.append(paramAnonymousView);</span><br><span class="line">          localStringBuilder.append(&quot;&#125;&quot;);</span><br><span class="line">          localTextView.setText(localStringBuilder.toString());</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>由于静态分析代码太多进行动态调试，目的获取v11在赋值为falg时查看其对应寄存器中的值</p>
<p>用ida在<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Java_com_gxsosec_www_android_1crackme3_MainActivity_stringFromJNI</span><br></pre></td></tr></table></figure></p>
<p>的起始处下断点，并通过修改对应寄存器的值来控制代码流程，使其步入if ( v12 == 16 )的ture判断中，当代码_aeabi_memcpy(v11, &amp;v25, 16);执行完毕后v11不再改变，此时查看其对应R5寄存器中的值即可得到flag：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">it_w@3_n0t_kn0wn</span><br></pre></td></tr></table></figure>
<h1 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h1><h3 id="1-、维吉尼亚遇上困难"><a href="#1-、维吉尼亚遇上困难" class="headerlink" title="1)、维吉尼亚遇上困难"></a>1)、维吉尼亚遇上困难</h3><p>看题目就是维吉尼亚加密了</p>
<p>先用脚本暴力破解一次：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">def virginiaCrack(cipherText): # 解密函数</span><br><span class="line">    length = getKeyLen(cipherText) #得到密钥长度</span><br><span class="line">    key = getKey(cipherText,length) #找到密钥</span><br><span class="line">    keyStr = &apos;&apos;</span><br><span class="line">    for k in key:</span><br><span class="line">        keyStr+=k</span><br><span class="line">    print(&apos;the key:&apos;,keyStr)</span><br><span class="line">    plainText = &apos;&apos;</span><br><span class="line">    index = 0</span><br><span class="line">    for ch in cipherText:</span><br><span class="line">        c = chr((ord(ch)-ord(key[index%length]))%26+97)</span><br><span class="line">        plainText += c</span><br><span class="line">        index+=1</span><br><span class="line">    return plainText</span><br><span class="line">def openfile(fileName): # 读文件</span><br><span class="line">    file = open(&quot;2.txt&quot;,&apos;r&apos;)</span><br><span class="line">    text = file.read()</span><br><span class="line">    file.close();</span><br><span class="line">    text = text.replace(&apos;\n&apos;,&apos;&apos;)</span><br><span class="line">    return text</span><br><span class="line"></span><br><span class="line">def getKeyLen(cipherText): # 获取密钥长度</span><br><span class="line">    keylength = 1</span><br><span class="line">    maxCount = 0</span><br><span class="line">    for step in range(3,18): # 循环密钥长度</span><br><span class="line">        count = 0</span><br><span class="line">        for i in range(step,len(cipherText)-step):</span><br><span class="line">            if cipherText[i] == cipherText[i+step]:</span><br><span class="line">                 count += 1</span><br><span class="line">        if count&gt;maxCount:</span><br><span class="line">            maxCount = count</span><br><span class="line">            keylength = step</span><br><span class="line">    return keylength</span><br><span class="line"></span><br><span class="line">def getKey(text,length): # 获取密钥</span><br><span class="line">    key = [] # 定义空白列表用来存密钥</span><br><span class="line">    alphaRate =[0.08167,0.01492,0.02782,0.04253,0.12705,0.02228,0.02015,0.06094,0.06996,0.00153,0.00772,0.04025,0.02406,0.06749,0.07507,0.01929,0.0009,0.05987,0.06327,0.09056,0.02758,0.00978,0.02360,0.0015,0.01974,0.00074]</span><br><span class="line">    matrix =textToList(text,length)</span><br><span class="line">    for i in range(length):</span><br><span class="line">        w = [row[i] for row in matrix] #获取每组密文</span><br><span class="line">        li = countList(w) </span><br><span class="line">        powLi = [] #算乘积</span><br><span class="line">        for j in range(26):</span><br><span class="line">            Sum = 0.0</span><br><span class="line">            for k in range(26):</span><br><span class="line">                Sum += alphaRate[k]*li[k]</span><br><span class="line">            powLi.append(Sum)</span><br><span class="line">            li = li[1:]+li[:1]#循环移位</span><br><span class="line">        Abs = 100</span><br><span class="line">        ch = &apos;&apos;</span><br><span class="line">        for j in range(len(powLi)):</span><br><span class="line">             if abs(powLi[j] -0.065546)&lt;Abs: # 找出最接近英文字母重合指数的项</span><br><span class="line">                 Abs = abs(powLi[j] -0.065546) # 保存最接近的距离，作为下次比较的基准</span><br><span class="line">                 ch = chr(j+97)</span><br><span class="line">        key.append(ch)</span><br><span class="line">    return key                </span><br><span class="line"></span><br><span class="line">def countList(lis): # 统计字母频度</span><br><span class="line">    li = []</span><br><span class="line">    alphabet = [chr(i) for i in range(97,123)]</span><br><span class="line">    for c in alphabet:</span><br><span class="line">        count = 0</span><br><span class="line">        for ch in lis:</span><br><span class="line">            if ch == c:</span><br><span class="line">                count+=1</span><br><span class="line">        li.append(count/len(lis))</span><br><span class="line">    return li</span><br><span class="line"></span><br><span class="line">def textToList(text,length): # 根据密钥长度将密文分组</span><br><span class="line">    textMatrix = []</span><br><span class="line">    row = []</span><br><span class="line">    index = 0</span><br><span class="line">    for ch in text:</span><br><span class="line">        row.append(ch)</span><br><span class="line">        index += 1</span><br><span class="line">        if index % length ==0:</span><br><span class="line">            textMatrix.append(row)</span><br><span class="line">            row = []</span><br><span class="line">    return textMatrix</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    cipherText = openfile(r&apos;&apos;) # 这里要根据文档目录的不同而改变</span><br><span class="line">    plainText= virginiaCrack(cipherText)</span><br><span class="line">    print(&apos;the plainText:\n&apos;,plainText)</span><br></pre></td></tr></table></figure>
<p>得到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vtanhjggwatzjoqdwocalqrjzhfbtweiujafesdhlukzcoslupahjuhogxkiubgqnadxraigjdjneuuptcocqepnowqvqhzqxzogjdqjgkajnhqrnmxjfjgqdurobbrqjzrrapujzhnrpzeisclvikdbwvpqpzswakzaomovxqpcsundanvhxeabwngnqcoyzdcnpoadbbcgopdcwoqskqsaaoqjoowqczaqouhcfejbxeimjdnnqdkidbrfvdujtbpkqjxsjaffaxvwbnactwwgyapccdfczzvbmgyaodblrvikovxhumjyowqhaqmhqrnmxjfjgqducobogqjmswnoqzvgcugepvhnxgkhvpxecfkmmxspqprcaxkzcvbmfyupxvraifaxvwbnactphzkzenhalqroxwnaeqwircretjjzxtarhvurfaaqvfnfqweirul</span><br></pre></td></tr></table></figure>
<p>然后再丢到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://68.168.134.3/vigener/</span><br></pre></td></tr></table></figure>
<p>解得到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">thestatekeylaboratoryofnetworkingandswitchingtechnologybelongstobeijinguniversityofpostsandtelecommunicationsthelaboratorywasopenedinnineteenninetytwoinnineteenninetyfivethelaboratorypassedacceptanceinspectionbogovernmentandanevaluationorganizedbyministryofscienceandtechnologyintwothousandandtwosincetwothousandandfourthelaboratoryhasbeenrenamedasthestatekeylaboratoryofnetworkingandswitchingtechnologybyministryofscienceandtechnologyflagisyouaresokindly</span><br></pre></td></tr></table></figure>
<p>这么一段英文，flag就是最后一句，flag：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">you are so kindly</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    
<div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------<i class="fa fa-paw"></i>Tanks for reading-------------</div>
    
</div>
  
</div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ctf相关/" rel="tag"><i class="fa fa-tag"></i> ctf相关</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/11/26/echo写马的小技巧/" rel="next" title="echo写马的小技巧">
                <i class="fa fa-chevron-left"></i> echo写马的小技巧
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/12/24/内网(域)渗透常用命令/" rel="prev" title="内网(域)渗透常用命令">
                内网(域)渗透常用命令 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zNjAxMS8xMjU0Nw=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/0.jpg"
                alt="Robot" />
            
              <p class="site-author-name" itemprop="name">Robot</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/r0both" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=1924718656@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-globe"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://rcoil.me/" title="Rcoil的窝" target="_blank">Rcoil的窝</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://hone.cool" title="Hone" target="_blank">Hone</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://9finger.github.io/" title="九指" target="_blank">九指</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://hamal.cc/" title="搬运工" target="_blank">搬运工</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#web"><span class="nav-number">1.</span> <span class="nav-text">web</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-、超简单"><span class="nav-number">1.0.1.</span> <span class="nav-text">1)、超简单</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2）、帽子商城"><span class="nav-number">1.0.2.</span> <span class="nav-text">2）、帽子商城</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3）、sql"><span class="nav-number">1.0.3.</span> <span class="nav-text">3）、sql???</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#misc"><span class="nav-number">2.</span> <span class="nav-text">misc</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-、太简单了"><span class="nav-number">2.0.1.</span> <span class="nav-text">1)、太简单了</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-、misc2"><span class="nav-number">2.0.2.</span> <span class="nav-text">2)、misc2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-、txt"><span class="nav-number">2.0.3.</span> <span class="nav-text">3)、txt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-、流量包"><span class="nav-number">2.0.4.</span> <span class="nav-text">3)、流量包</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mobile"><span class="nav-number">3.</span> <span class="nav-text">Mobile</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-、Android300"><span class="nav-number">3.0.1.</span> <span class="nav-text">1)、Android300</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Crypto"><span class="nav-number">4.</span> <span class="nav-text">Crypto</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-、维吉尼亚遇上困难"><span class="nav-number">4.0.1.</span> <span class="nav-text">1)、维吉尼亚遇上困难</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Robot</span>

  
</div>


  <div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>
<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>
</div>





        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("aWCr3LHQBRrDkEteBj53u1Fy-gzGzoHsz", "62owjlH99N4edUWk0rFOP0YO");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  


</body>
</html>
